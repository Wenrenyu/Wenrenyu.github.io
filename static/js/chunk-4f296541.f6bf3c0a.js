(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f296541"],{1643:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.httpsUrl,data:e.params,"show-file-list":!1,"before-upload":e.upload,"on-success":e.uploadSuccess,"on-error":e.uploadError,"on-change":e.uploadChange,"auto-upload":!1}},[e.imgsrc?o("img",{attrs:{src:e.imgsrc,height:"200",width:"200"}}):e.value?o("img",{attrs:{src:e.value,height:"200",width:"200"}}):o("i",{staticClass:"el-icon-plus"})])},r=[],l=o("1da1"),s=(o("96cf"),o("fb6a"),o("b0c0"),o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),o("62e4")),i={props:["value","addoff"],data:function(){return{fileList:[],httpsUrl:"",params:{},imgsrc:"",reponse:""}},mounted:function(){console.log(this.imgsrc,this.addoff)},methods:{upload:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var a,r,l,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Object(s["u"])();case 2:a=o.sent,t.httpsUrl=a.host,r=e.name.slice(e.name.lastIndexOf(".")),l=Date.now()+r,i=a.dir+"myVue/"+l,t.params={key:i,ossAccessKeyId:a.accessid,policy:a.policy,Signature:a.signature,callback:a.callback};case 8:case"end":return o.stop()}}),o)})))()},uploadError:function(e,t,o){this.$message.error("上传失败"+e)},uploadSuccess:function(e,t,o){console.log("上传成功触发",this.params.key,e),this.$emit("input",this.params.key),this.$message.success("上传成功")},uploadChange:function(e,t){var o=e.raw.type;if("image/png"!==o&&"image/jpeg"!==o)return this.warning("请上传图片格式");this.imgsrc=URL.createObjectURL(e.raw),2===t.length&&t.shift(),console.log("虚假的上传",e,t,this.params.key)},submitUpload:function(){this.$refs.upload.submit()}}},n=i,u=o("2877"),c=Object(u["a"])(n,a,r,!1,null,null,null);t["a"]=c.exports},"405a":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-card",[o("div",{staticClass:"box"},[o("div",{staticClass:"title"},[e._v("用户列表")]),o("div",[o("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("添加轮播")])],1)]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[o("el-table-column",{attrs:{prop:"title",label:"轮播图名称",width:"180"}}),o("el-table-column",{attrs:{prop:"url",label:"跳转地址",width:"300"}}),o("el-table-column",{attrs:{prop:"img_url",label:"轮播图片",width:"250"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("img",{attrs:{src:e.row.img_url,height:"100",width:"100%"}})]}}])}),o("el-table-column",{attrs:{prop:"seq",label:"轮播排序",width:"100"}}),o("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"300"}}),o("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.status?"已展示":"未展示")+" "),o("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","active-value":1,"inactive-value":0},on:{change:function(o){return e.putOff(t.row.id)}},model:{value:t.row.status,callback:function(o){e.$set(t.row,"status",o)},expression:"scope.row.status"}})]}}])}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1),o("div",{staticClass:"block",staticStyle:{margin:"20px 0 10px 0",width:"100%","text-align":"center"}},[o("el-pagination",{attrs:{"current-page":1,layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e.isAdd?o("add",{attrs:{show:e.isAdd},on:{onClose:e.onClose,onLoad:e.getData}}):e._e(),e.isEdit?o("edit",{attrs:{"show-id":e.editId,show:e.isEdit},on:{onClose:e.onCloseEdit,onLoad:e.getData}}):e._e()],1)},r=[],l=o("1da1"),s=(o("96cf"),o("62e4")),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"添加轮播图片",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:"轮播名称:",prop:"name","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"跳转链接:",prop:"url","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),o("el-form-item",{attrs:{label:"是否展示:",prop:"status","label-width":e.formLabelWidth}},[o("el-radio-group",{on:{change:e.addStutas},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[o("el-radio-button",{attrs:{label:"展示"}}),o("el-radio-button",{attrs:{label:"不展示"}})],1)],1),o("el-form-item",{attrs:{label:"添加图片:",prop:"cover","label-width":e.formLabelWidth}},[o("imgUpload",{ref:"imgUpload",model:{value:e.form.cover,callback:function(t){e.$set(e.form,"cover",t)},expression:"form.cover"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("ruleForm")}}},[e._v("确 定")])],1)],1)},n=[],u=(o("b0c0"),o("1643")),c={components:{imgUpload:u["a"]},props:{show:{type:Boolean,default:!1}},data:function(){return{dialogVisible:this.show,formLabelWidth:"100px",form:{name:"",url:"",cover:"",status:"展示"},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],url:[{required:!0,message:"请输入链接地址",trigger:"blur"}],status:[{required:!0,message:"请选择展示状态",trigger:"blur"}],cover:[{required:!0,message:"请点击上传图片",trigger:"blur"}]}}},watch:{"form.cover":function(e,t){""!==t&&this.handleSend()}},methods:{handleClose:function(){this.dialogVisible=!1,this.$emit("onClose",this.dialogVisible)},addStutas:function(){console.log(this.form)},handleConfirm:function(e){var t=this;""===this.form.cover&&(this.form.cover=this.$refs.imgUpload.imgsrc),this.$refs[e].validate((function(e){if(!e)return t.$message("错误"),!1;t.$refs.imgUpload.submitUpload()}))},handleSend:function(){var e=this,t=this.form.status;t="展示"===t?1:0;var o={title:this.form.name,img:this.form.cover,url:this.form.url,status:t};Object(s["d"])(o).then((function(){e.success("添加成功"),e.handleClose(),e.$emit("onLoad")})),console.log(o)}}},d=c,m=o("2877"),f=Object(m["a"])(d,i,n,!1,null,null,null),h=f.exports,p=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"修改轮播图片",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:"轮播名称:",prop:"name","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"跳转链接:",prop:"url","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),o("el-form-item",{attrs:{label:"是否展示:",prop:"status","label-width":e.formLabelWidth}},[o("el-radio-group",{on:{change:e.addStutas},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[o("el-radio-button",{attrs:{label:"展示"}}),o("el-radio-button",{attrs:{label:"不展示"}})],1)],1),o("el-form-item",{attrs:{label:"添加图片:",prop:"cover","label-width":e.formLabelWidth}},[e.isForm?o("imgUpload",{ref:"imgUpload",model:{value:e.form.cover,callback:function(t){e.$set(e.form,"cover",t)},expression:"form.cover"}}):e._e()],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("ruleForm")}}},[e._v("确 定")])],1)],1)},g=[],b=(o("a9e3"),{components:{imgUpload:u["a"]},props:{show:{type:Boolean,default:!1},showId:{type:Number,default:0}},data:function(){return{slidesId:this.showId,loading:!0,dialogVisible:this.show,formLabelWidth:"100px",isForm:!1,form:{},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],url:[{required:!0,message:"请输入链接地址",trigger:"blur"}],status:[{required:!0,message:"请选择展示状态",trigger:"blur"}],cover:[{required:!0,message:"请点击上传图片",trigger:"blur"}]}}},watch:{"form.cover":function(e,t){void 0!==t&&this.handleSend(),console.log("组件的值有变化了","新的值"+e,"旧值"+t)}},mounted:function(){var e=this;Object(s["f"])(this.slidesId).then((function(t){var o=t.status;o=1===o?"展示":"不展示",e.form={name:t.title,url:t.url,cover:t.img_url,status:o},void 0!==e.form&&(e.isForm=!0),e.loading=!1}))},methods:{handleClose:function(){this.dialogVisible=!1,this.$emit("onClose",this.dialogVisible)},addStutas:function(){console.log(this.form)},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!o){e.next=4;break}""===t.$refs.imgUpload.imgsrc?t.handleSend():t.$refs.imgUpload.submitUpload(),e.next=6;break;case 4:return t.$message("错误"),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleSend:function(){var e=this,t=this.form.status;t="展示"===t?1:0;var o={title:this.form.name,img:this.form.cover,url:this.form.url,status:t};console.log(o),Object(s["i"])(this.slidesId,o).then((function(t){e.success("修改成功"),e.handleClose(),e.$emit("onLoad")}))}}}),v=b,w=Object(m["a"])(v,p,g,!1,null,null,null),C=w.exports,k={name:"Carousel",components:{add:h,edit:C},data:function(){return{list:[],current:1,isAdd:!1,isEdit:!1,editId:0,total:0,page:1}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={current:e.current},t.next=3,Object(s["g"])(o);case 3:a=t.sent,e.list=a.data,e.total=a.meta.pagination.total,console.log(a);case 7:case"end":return t.stop()}}),t)})))()},putOff:function(e){var t=this;Object(s["h"])(e).then((function(){t.success("设置成功"),t.getData()}))},handleEdit:function(e,t){this.isEdit=!0,this.editId=t.id,console.log(t)},handleDelete:function(e,t){var o=this;this.confirm("您确定要删除! 将永久删除？").then((function(){Object(s["e"])(t.id).then((function(){o.success("成功删除"),o.getData()}))}))},onClose:function(e){this.isAdd=e},onCloseEdit:function(e){this.isEdit=e},handleAdd:function(){this.isAdd=!0},handleSizeChange:function(e){console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.current=e,this.getData()}}},x=k,$=(o("be35"),Object(m["a"])(x,a,r,!1,null,"764e0014",null));t["default"]=$.exports},9018:function(e,t,o){},be35:function(e,t,o){"use strict";o("9018")}}]);